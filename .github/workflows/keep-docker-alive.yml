name: Keep Photo-Refine Image Alive

on:
  schedule:
    # Chạy vào lúc 00:00 ngày 1 hàng tháng
    - cron: '0 0 1 * *'
  workflow_dispatch: # Cho phép bấm nút chạy thủ công

jobs:
  keep-alive:
    runs-on: ubuntu-latest
    steps:
      - name: Login to Docker Hub
        uses: docker/login-action@v3
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}

      - name: Refresh Photo-Refine Image
        run: |
          # Pull bản mới nhất về
          docker pull huudatlego/photo-refine:latest
          
          # Tag lại (giữ nguyên tên)
          docker tag huudatlego/photo-refine:latest huudatlego/photo-refine:latest
          
          # Push ngược lên để cập nhật mốc "Last pushed" trên Docker Hub
          docker push huudatlego/photo-refine:latest
          
          echo "Đã làm mới image photo-refine thành công vào lúc $(date)"
